# Математическо описание на алгоритъма на Де Кастелжо
# Производна на крива на Безие - Ходограф

## 1. Криви на Безие

Кривите на Безие са фундаментален инструмент в компютърната графика, компютърното геометрично моделиране, CAD/CAM системите и анимацията. Те се дефинират чрез краен брой контролни точки и позволяват интуитивен контрол върху формата на кривата.

**Дефиниция**  

Крива на Безие от степен \( n \) се дефинира като:

$$
B(t) = \sum_{i=0}^{n} P i \, b i,n(t), \quad t \in [0,1]
$$

където:
- \( P i \) — контролните точки  
- \( b i,n(t) \) — базисен полином на Бернщайн от степен \( n \)

---

## 2. Полиноми на Бернщайн

Базисният полином на Бернщайн е даден със следната формула:

$$
b i,n(t) = \binom{n}{i} (1-t)^{n-i} t^i
$$

където биномиалният коефициент се изчислява като:

$$
\binom{n}{i} = \frac{n!}{i!(n-i)!}
$$

Свойства на полиномите на Бернщайн:
- \( b i,n(t) \ge 0 \) за \( t \in [0,1] \)
- \(\sum_{i=0}^{n} b i,n(t) = 1\)

Това гарантира, че кривата лежи в изпъкналата обвивка на контролните точки.

---

## 3. Алгоритъм на De Casteljau

Алгоритъмът на Де Кастелжо изчислява точки от кривата чрез последователна линейна интерполация:

$$
P i^{(r)}(t) = (1-t) P i^{(r-1)} + t \, P {i+1}^{(r-1)}, \quad r=1,2,\dots,n
$$

с начални условия:

$$
P i^{(0)} = P i, \quad i=0,1,\dots,n
$$

Последната останала точка дава точката на кривата при параметър \( t \):

$$
B(t) = P0^{(n)}(t)
$$

---

## 4. Производни на крива на Безие

Производната на крива на Безие от степен \( n \) е нова Безиева крива от степен \( n-1 \).

**Контролни точки на производната:**

$$
Q i = n (P{i+1} - P i), \quad i=0,1,\dots,n-1
$$

**Формула за първа производна:**

$$
B'(t) = \sum_{i=0}^{n-1} n (P{i+1} - P i) \, b i,n-1(t)
$$

**Пример – квадратична крива (\( n = 2 \))**  

За три контролни точки \( P0, P1, P2 \), първата производна е линейна Безиева крива:

$$
Q0 = 2(P1 - P0), \quad Q1 = 2(P2 - P1)
$$

$$
B'(t) = (1-t) Q0 + t Q1
$$

---

## 5. Производна чрез алгоритъма на De Casteljau

Производната може да се изчисли чрез прилагане на алгоритъма върху контролни точки \( Q i \).  
Така алгоритъмът позволява едновременно:
- изчисляване на точка от кривата  
- намиране на допирателната (скоростния вектор)

---

## 6. Ходограф на крива на Безие

Ходографът на крива на Безие е кривата, дефинирана от първата ѝ производна:

$$
H(t) = B'(t) = \sum_{i=0}^{n-1} n (P{i+1} - P i) \, b i,n-1(t)
$$

Геометричен смисъл:
- Всяка точка на ходографа представлява скоростния вектор на оригиналната крива  
- Формата на ходографа описва промяната на скоростта  
- Линейни сегменти в ходографа означават линейна промяна на скоростта

---

## 7. Subdivision на крива на Безие

Subdivision (разделяне) разбива крива на две под-криви при параметър \( t \). Алгоритъмът на Де Кастелжо дава всички междинни точки.

**Контролни точки на подкривите:**

- **Лява под-крива:**  
$$
P0, P0^{1}, P0^{2}, \dots, P0^{n}
$$

- **Дясна под-крива:**  
$$
P0^{n}, P1^{n-1}, P2^{n-2}, \dots, Pn
$$

Subdivision гарантира точно представяне без загуба на информация.

---

## 8. Заключение

Алгоритъмът на Де Кастелжо е универсален и числено стабилен метод за работа с криви на Безие. Позволява:
- изчисляване на точки върху кривата  
- намиране на производни  
- визуализация на ходограф  
- subdivision и анализ на гладкостта

Тези свойства го правят подходящ за компютърното геометрично моделиране и образователни цели.
