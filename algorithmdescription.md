# Математическо описание на алгоритъма на Де Кастелжо
# Производна на крива на Безие - Ходограф

## 1. Криви на Безие

Кривите на Безие са фундаментален инструмент в компютърната графика, компютърното геометрично моделиране, CAD/CAM системите и анимацията. Те се дефинират чрез краен брой контролни точки и позволяват интуитивен контрол върху формата на кривата.

**Дефиниция**  

Крива на Безие от степен \( n \) се дефинира като:

$$
B(t) = \sum_{i=0}^{n} P_i \, b_{i,n}(t), \quad t \in [0,1]
$$

- `Pi` — контролните точки
- `b{i,n}(t)` — базисен полином на Бернщайн от степен `n`

---

## 2. Полиноми на Бернщайн

Базисният полином на Бернщайн е даден със следната формула:

$$
b_{i,n}(t) = \binom{n}{i} (1-t)^{n-i} t^i
$$

където биномиалният коефициент се изчислява като:

$$
\binom{n}{i} = \frac{n!}{i!(n-i)!}
$$

Свойства на полиномите на Бернщайн:
- \( b_{i,n}(t) \ge 0 \) за \( t \in [0,1] \)
- \(\sum_{i=0}^{n} b_{i,n}(t) = 1\)

Това гарантира, че кривата лежи в изпъкналата обвивка на контролните точки.

---

## 3. Алгоритъм на De Casteljau

Алгоритъмът на Де Кастелжо изчислява точки от кривата чрез последователна линейна интерполация:

$$
P_i^{(r)}(t) = (1-t) P_i^{(r-1)} + t \, P_{i+1}^{(r-1)}, \quad r=1,2,\dots,n
$$

с начални условия:

$$
P_i^{(0)} = P_i, \quad i=0,1,\dots,n
$$

Последната останала точка дава точката на кривата при параметър \( t \):

$$
B(t) = P_0^{(n)}(t)
$$

---

## 4. Производни на крива на Безие

Производната на крива на Безие от степен \( n \) е нова Безиева крива от степен \( n-1 \).

**Контролни точки на производната:**

$$
Q_i = n (P_{i+1} - P_i), \quad i=0,1,\dots,n-1
$$

**Формула за първа производна:**

$$
B'(t) = \sum_{i=0}^{n-1} n (P_{i+1} - P_i) \, b_{i,n-1}(t)
$$

**Пример – квадратична крива (\( n = 2 \))**  

За три контролни точки \( P_0, P_1, P_2 \), първата производна е линейна Безиева крива:

$$
Q_0 = 2(P_1 - P_0), \quad Q_1 = 2(P_2 - P_1)
$$

$$
B'(t) = (1-t) Q_0 + t Q_1
$$

---

## 5. Производна чрез алгоритъма на De Casteljau

Производната може да се изчисли чрез прилагане на алгоритъма върху контролни точки \( Q_i \).  
Така алгоритъмът позволява едновременно:
- изчисляване на точка от кривата  
- намиране на допирателната (скоростния вектор)

---

## 6. Ходограф на крива на Безие

Ходографът на крива на Безие е кривата, дефинирана от първата ѝ производна:

$$
H(t) = B'(t) = \sum_{i=0}^{n-1} n (P_{i+1} - P_i) \, b_{i,n-1}(t)
$$

Геометричен смисъл:
- Всяка точка на ходографа представлява скоростния вектор на оригиналната крива  
- Формата на ходографа описва промяната на скоростта  
- Линейни сегменти в ходографа означават линейна промяна на скоростта

---

## 7. Subdivision на крива на Безие

Subdivision (разделяне) разбива крива на две под-криви при параметър \( t \). Алгоритъмът на Де Кастелжо дава всички междинни точки.

**Контролни точки на подкривите:**

- **Лява под-крива:**  
$$
P_0, P_0^{(1)}, P_0^{(2)}, \dots, P_0^{(n)}
$$

- **Дясна под-крива:**  
$$
P_0^{(n)}, P_1^{(n-1)}, P_2^{(n-2)}, \dots, P_n
$$

**Свойства на полиномите на Бернщайн:**

- \( b_{i,n}(t) \ge 0 \) за \( t \in [0,1] \)  
- \(\sum_{i=0}^{n} b_{i,n}(t) = 1\)  
- \( P_i \) — контролните точки  
- \( b_{i,n}(t) \) — базисен полином на Бернщайн от степен \( n \)

---

## 8. Предимства на алгоритъма на Де Кастелжо

- Числова стабилност: използва само линейна интерполация  
- Рекурсивна природа: ефективно разделяне на криви  
- Позволява лесно изчисление на точки, производни и ходограф  
- Широко приложение в компютърната графика, анимация и CAD/CAM  

---

## 9. Заключение

Алгоритъмът на Де Кастелжо е универсален и числено стабилен метод за работа с криви на Безие. Позволява:
- изчисляване на точки върху кривата  
- намиране на производни  
- визуализация на ходограф  
- subdivision и анализ на гладкостта

Тези свойства го правят подходящ за компютърното геометрично моделиране и образователни цели.
